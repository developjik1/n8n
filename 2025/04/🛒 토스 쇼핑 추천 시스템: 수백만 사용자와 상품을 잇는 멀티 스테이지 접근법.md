# 🎯 🛒 토스 쇼핑 추천 시스템: 수백만 사용자와 상품을 잇는 멀티 스테이지 접근법

> 🕒 **발행일:** Thu, 17 Apr 2025 03:40:00 GMT  
> 🔗 **원본 링크:** [👉 바로 가기](https://toss.tech/article/toss-shopping-recommendation-system)

---

## 📌 **핵심 요약**  
📖 안녕하세요, 토스 커머스 개인화팀의 ML Engineer 김정오입니다.

현재 토스 앱 하단 메뉴의 중앙은 저희팀에서 만들어가고 있는 토스 쇼핑이 자리하고 있는데요. 토스 쇼핑은 사용자 데이터를 기반으로 사용자에게 가장 필요한 상품을 추천해주게 되어있어요. 이 글을 통해서 토스 쇼핑은 어떻게 개인화 추천 시스템을 만들고 있는지 간략히 설명해 드리고자 합니다.

## 🔍 목적형 사용자와 탐색형 사용자

토스 쇼핑은 다양한 소비자 유형을 다루고 있어요. 이 중 특히 중요한 두 가지 유형은 목적형 사용자와 탐색형 사용자인데요, 그 정의는 아래와 같습니다.

* 목적형 사용자 (Goal-Oriented User)  
명확한 구매 목표 또는 특정 상품에 대한 수요를 가지고 플랫폼에 방문하는 사용자입니다. 이들은 구체적인 상품명, 카테고리, 가격대 등의 기준을 기반으로 검색 및 탐색 활동을 수행하며, 최대한 빠르게 원하는 상품을 발견하고 구매하는 것을 목표로 해요.
* 탐색형 사용자 (Exploratory User)  
명시적인 구매 목적 없이 플랫폼을 탐색하며 다양한 상품을 둘러보는 사용자입니다. 이들은 우연히 발견한 상품 및 정보를 통해 흥미를 느끼고, 구매로 이어질 가능성을 높이는 행동 패턴을 보여요. 탐색형 사용자는 상품 카테고리에 대한 관심이 광범위하며, 구매 결정까지 상대적으로 긴 경로를 거치는 경향이 있습니다.

→ 토스 쇼핑은 탐색형 사용자의 비중이 높습니다. 따라서, 사용자가 자연스럽게 흥미를 느끼고 구매 행동으로 이어지도록 돕는 개인화 추천 시스템이 필수적이에요.

## 📈 추천 시스템의 필요성

* 수백만 명의 사용자와 수백만 건의 상품이 존재하는 대규모 플랫폼에서는, 사용자와 상품 간의 최적 매칭을 수작업으로 제공하는 것은 불가능합니다.
* 특히 탐색형 사용자의 경우, 명확한 검색 키워드 없이도 매력적인 상품을 발견할 수 있도록 돕는 개인화 추천 시스템이 핵심 역할을 합니다.
* 추천 시스템은 사용자 경험을 향상시키고, 구매 전환율을 높이며, 서비스 체류 시간을 증가시키는 데 직접적인 영향을 미칩니다.

## 🛠 멀티 스테이지 추천 시스템

대규모 추천 문제를 해결하기 위해, 저희는 성능과 속도를 모두 고려하여 멀티 스테이지(Multi-Stage) 구조를 채택했어요. 이 구조는 크게 다음과 같은 단계로 이루어집니다.

![](https://static.toss.im/ipd-tcs/toss_core/live/3bb954ae-fc34-4056-867c-42e44dca1a11/tech-250417-세로.png)

## 1\. Retrieval

Retrieval 단계에서는 수백만 개의 상품 중에서 사용자에게 어울릴 가능성이 높은 수천 개의 상품을 빠르게 후보로 뽑아내요. 이 단계는 매우 빠른 응답 속도가 요구되며, 아래와 같이 다양한 방법론이 활용됩니다.

* Two-Tower 모델: 사용자와 아이템 각각을 임베딩하여 벡터 공간에 매핑하고, 벡터 검색(Nearest Neighbor Search)을 통해 유사한 상품을 빠르게 검색합니다. DNN 기반 인코딩을 사용하며, 두 타워의 임베딩 결과를 내적(Dot Product)하여 유사도를 계산합니다.
* Graph 기반 모델: 사용자-상품 상호작용 데이터를 그래프 형태로 표현하여, Graph Neural Network(GNN)를 통해 잠재적 연관성을 학습합니다. GraphSAGE, PinSage, LightGCN 등의 기술이 활용돼요.
* Sequence 모델: 사용자의 행동 이력을 시퀀스로 모델링하고, Transformer 기반 모델(SASRec, BERT4Rec 등)을 통해 시계열 관계를 포착하여 다음 상호작용 상품을 예측합니다.

Retrieval 단계는 정확성과 효율성의 균형을 맞추는 것이 중요하며, 이후 Ranking 단계로 넘어가기 위해 충분히 다양한 후보를 확보하는 역할을 합니다.

## 2\. Ranking

Ranking 단계에서는 Retrieval 단계에서 얻은 수천 개의 후보군을 받아 개인화 모델을 통해 점수를 매기고 정렬해요. 주요 목표는 pCTR(predicted Click-Through Rate) 및 pCVR(predicted Conversion Rate)을 정확히 예측하는 것입니다. 이 단계 역시 아래와 같이 다양한 방법론이 사용됩니다.

* DeepFM: FM(Factorization Machine)으로 특징 간의 이차 상호작용을 포착하고, DNN으로 비선형 관계를 학습하는 구조입니다.
* DLRM(Deep Learning Recommendation Model): 조밀 특징(Dense features)과 희소 특징(Sparse features)을 통합하여 복잡한 사용자-상품 관계를 모델링합니다.
* DCN(Deep & Cross Network): 특징 간의 조합(Cross Feature Interactions)을 명시적으로 학습하여 고차원적인 특징 조합을 효과적으로 반영합니다.
* ESMM(Entire Space Multi-Task Model): 클릭(Click)과 전환(Conversion) 확률을 함께 학습하는 Multi-Task Learning 기반 모델로, pCTR과 pCVR을 동시에 고려하여 학습 효율성과 일반화를 높입니다.

이러한 모델들은 개별 예측 성능을 높이는 것뿐만 아니라, 서비스의 핵심 지표(GMV, Orders 등) 최적화에도 큰 기여를 합니다.

## 3\. Re-ranking

최종 단계인 Re-ranking에서는 초기 모델 점수 외에도 다양한 비즈니스 로직과 사용자 경험 향상을 위한 요소를 반영하여 결과를 조정합니다. 주요 목표는 추천 결과의 다양성(Diversity), 신선도(Novelty), 비즈니스 지표 최적화를 동시에 만족시키는 것이에요.

* 신선도(Novelty) 보장: 사용자에게 새로운 경험을 제공하기 위해, Cold-Start 아이템(최근 등록된 신상품 또는 상호작용 데이터가 적은 상품)을 일정 비율 포함시킵니다.
* 광고 상품과 비광고 상품의 혼합: 광고 성과를 극대화하기 위해, 광고 상품과 비광고 상품을 자연스럽게 섞어 노출해요. 광고 상품이 과도하게 몰리지 않도록 조정하여 사용자 경험을 해치지 않으면서 높은 ROI를 기대할 수 있도록 합니다.
* 다양성 및 카테고리 균형 고려: 다양한 카테고리와 상품 타입을 고르게 배치하여 추천 품질을 높입니다.

이렇게 다양한 요소를 반영한 Re-ranking은 단순 예측 점수에 기반한 정렬보다 실제 사용자 경험과 비즈니스 목표 모두를 동시에 만족시키는 데 중요한 역할을 합니다.

## 📝 결론

토스 쇼핑의 홈 피드 추천 시스템은 탐색형 사용자의 특성을 고려하여 설계된 멀티 스테이지 추천 시스템입니다.

수백만 명의 사용자와 수백만 건의 상품을 다루는 환경에서, Retrieval, Ranking, Re-ranking을 통한 점진적인 후보군 정제가 핵심 전략이죠. 이를 통해 사용자는 명확한 구매 목표 없이도 자연스럽게 흥미로운 상품을 발견하고, 구매로 이어질 수 있습니다.

토스 쇼핑에서는 각 스테이지(Retrieval, Ranking, Re-ranking)별 추천 모델을 지속적으로 개선하고 고도화할 ML Engineer를 찾고 있어요. 토스 쇼핑의 추천 시스템을 함께 만들어가실 분들의 많은 지원을 기다립니다!

---

## 📋 **추가 정보**  
🔹 **게시 날짜:** Thu, 17 Apr 2025 03:40:00 GMT  
🔹 **출처:** [원본 링크](https://toss.tech/article/toss-shopping-recommendation-system)  
🔹 **관련 태그:** #RSS #자동화 #n8n  

---

> ✨ _이 문서는 자동 생성되었습니다. 🚀 Powered by n8n_
